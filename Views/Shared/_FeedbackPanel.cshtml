@{
    var pageUrl = Context.Request.Path;
}

<div class="feedback-section">
    <h2 class="govuk-heading-m">Was this page useful?</h2>
    <p class="govuk-body">Help us improve the Service Manual by giving your feedback.</p>
    
    <div class="feedback-buttons">
        <button type="button" class="feedback-button govuk-button" data-feedback="yes" aria-label="Yes, this page was useful">
            Yes
        </button>
        <button type="button" class="feedback-button feedback-button--secondary govuk-button govuk-button--secondary" data-feedback="no" aria-label="No, this page was not useful">
            No
        </button>
    </div>
    
    <div id="feedback-details" class="govuk-!-margin-top-4" style="display: none;" role="region" aria-labelledby="feedback-details-heading">
        <h3 id="feedback-details-heading" class="govuk-visually-hidden">Feedback form</h3>
        <div class="govuk-form-group">
            <label class="govuk-label" for="feedback-comment">
                How could we improve this page? (optional)
            </label>
            <textarea class="govuk-textarea" id="feedback-comment" name="feedback-comment" rows="3" maxlength="500" aria-describedby="feedback-hint"></textarea>
            <div id="feedback-hint" class="govuk-hint">You have 500 characters remaining</div>
        </div>
        
        <button type="button" class="govuk-button" data-module="govuk-button" aria-label="Send feedback">
            Send feedback
        </button>
    </div>
    
    <div id="feedback-thanks" class="govuk-!-margin-top-4" style="display: none;" role="status" aria-live="polite" aria-atomic="true">
        <div class="govuk-panel govuk-panel--confirmation" style="background-color: #00703c;">
            <h2 class="govuk-panel__title">
                Thank you for your feedback
            </h2>
            <div class="govuk-panel__body">
                Your response helps us improve the manual
            </div>
        </div>
    </div>
</div>

<script>
    // Simple feedback interaction (can be enhanced with actual API call)
    document.querySelectorAll('[data-feedback]').forEach(button => {
        button.addEventListener('click', function() {
            const feedback = this.getAttribute('data-feedback');
            const feedbackDetails = document.getElementById('feedback-details');
            const feedbackThanks = document.getElementById('feedback-thanks');
            
            if (feedback === 'no') {
                feedbackDetails.style.display = 'block';
                feedbackDetails.setAttribute('aria-hidden', 'false');
                // Focus the textarea for keyboard users
                document.getElementById('feedback-comment').focus();
            } else {
                feedbackDetails.style.display = 'none';
                feedbackDetails.setAttribute('aria-hidden', 'true');
            }
            
            if (feedback === 'yes') {
                feedbackThanks.style.display = 'block';
                feedbackThanks.setAttribute('aria-hidden', 'false');
                setTimeout(() => {
                    feedbackThanks.style.display = 'none';
                    feedbackThanks.setAttribute('aria-hidden', 'true');
                }, 5000);
            } else {
                feedbackThanks.style.display = 'none';
                feedbackThanks.setAttribute('aria-hidden', 'true');
            }
        });
    });
</script>

